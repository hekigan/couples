{{if .Friends}}
<ul role="list" style="list-style: none; padding: 0; margin: 0;">
    {{range .Friends}}
    <li class="friend-item" id="friend-{{.ID}}">
        <div class="friend-info">
            <span class="friend-name">{{.Username}}</span>
        </div>
        <button hx-post="/api/rooms/invitations"
                hx-vals='{"room_id": "{{$.RoomID}}", "invitee_id": "{{.ID}}"}'
                hx-target="#friend-{{.ID}}"
                hx-swap="outerHTML"
                hx-disabled-elt="this"
                hx-indicator="#invite-loading-{{.ID}}"
                hx-on::after-request="
                    if(!event.detail.successful) {
                        const errorMsg = document.createElement('span');
                        errorMsg.textContent = 'âŒ Failed to invite';
                        errorMsg.style.cssText = 'color: #ef4444; font-size: 0.75rem; margin-left: 0.5rem;';
                        this.parentElement.appendChild(errorMsg);
                        setTimeout(() => errorMsg.remove(), 3000);
                    }
                "
                aria-label="Invite {{.Username}} to join your room"
                class="btn btn-primary btn-sm">
            <span>ğŸ“§ Invite</span>
            <span id="invite-loading-{{.ID}}" class="htmx-indicator" style="margin-left: 0.25rem; font-size: 0.75rem;">â³</span>
        </button>
    </li>
    {{end}}
</ul>
{{else}}
    <p role="status" style="color: #6b7280;">No friends yet. <a href="/friends" aria-label="Go to friends page to add friends">Add friends</a></p>
{{end}}

// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
package room

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"github.com/hekigan/couples/internal/services"
)

// GuestReadyButton renders the guest ready button with validation
func GuestReadyButton(data *services.GuestReadyButtonData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		if !data.GuestReady {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<button hx-post=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var2 string
			templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("/api/v1/rooms/%s/guest-ready", data.RoomID))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/views/fragments/room/guest_ready_button.templ`, Line: 12, Col: 69}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" hx-target=\"#guest-ready-section\" hx-swap=\"innerHTML\" hx-disabled-elt=\"this\" hx-indicator=\"#ready-loading\" hx-on::before-request=\"\n\t\t\t\tconst checked = document.querySelectorAll('#categories-grid input[type=checkbox]:checked').length;\n\t\t\t\tif(checked === 0) {\n\t\t\t\t\tconst errorDiv = document.createElement('div');\n\t\t\t\t\terrorDiv.className = 'error-message';\n\t\t\t\t\terrorDiv.textContent = '⚠️ Please select at least one category';\n\t\t\t\t\terrorDiv.style.cssText = 'color: #ef4444; margin-top: 0.5rem; font-size: 0.875rem;';\n\t\t\t\t\tthis.parentElement.appendChild(errorDiv);\n\t\t\t\t\tsetTimeout(() => errorDiv.remove(), 3000);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\" hx-on::after-request=\"\n\t\t\t\tif(!event.detail.successful) {\n\t\t\t\t\tconst errorDiv = document.createElement('div');\n\t\t\t\t\terrorDiv.className = 'error-message';\n\t\t\t\t\terrorDiv.textContent = '❌ Failed to mark ready. Please try again.';\n\t\t\t\t\terrorDiv.style.cssText = 'color: #ef4444; margin-top: 0.5rem; font-size: 0.875rem;';\n\t\t\t\t\tthis.parentElement.appendChild(errorDiv);\n\t\t\t\t\tsetTimeout(() => errorDiv.remove(), 5000);\n\t\t\t\t}\n\t\t\t\" aria-label=\"Mark yourself as ready to start the game\" class=\"btn btn-primary btn-lg\"><span>✅ I'm Ready</span> <span id=\"ready-loading\" class=\"htmx-indicator\" style=\"margin-left: 0.5rem;\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"><circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"3\" stroke-opacity=\"0.25\"></circle> <path d=\"M12 2a10 10 0 0 1 10 10\" stroke-width=\"3\" stroke-linecap=\"round\"><animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 12 12\" to=\"360 12 12\" dur=\"1s\" repeatCount=\"indefinite\"></animateTransform></path></svg></span></button><p class=\"ready-hint\" style=\"margin-top: 0.5rem; color: #6b7280; font-size: 0.875rem;\">Click when you're done selecting categories</p>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<div class=\"ready-confirmed-message\" role=\"status\" aria-live=\"polite\">✅ You're ready! Waiting for owner to start the game...</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
